<%- include('../flash.ejs') %>

<div class="max-w-md mx-auto bg-white shadow-md rounded p-6 mt-10">
  <h2 class="text-2xl font-bold mb-6 text-center text-indigo-600">User Signup</h2>

  <form method="POST" action="/signup" class="space-y-4">
    <div>
      <label class="block text-gray-700 font-semibold mb-1">Username</label>
      <input type="text" name="username" required class="w-full border px-3 py-2 rounded focus:ring focus:ring-indigo-300">
    </div>

    <div>
      <label class="block text-gray-700 font-semibold mb-1">Password</label>
      <input type="password" name="password" required class="w-full border px-3 py-2 rounded focus:ring focus:ring-indigo-300">
    </div>

    <div>
      <label class="block text-gray-700 font-semibold mb-1">Role</label>
      <select name="role" id="roleSelect" class="w-full border px-3 py-2 rounded focus:ring focus:ring-indigo-300">
        <option value="student">Student</option>
        <option value="admin">Admin</option>
        <option value="superadmin">Superadmin</option>
      </select>
    </div>

    <div id="clubDiv" class="hidden">
      <label class="block text-gray-700 font-semibold mb-1">Select Club</label>
      <select name="club" class="w-full border px-3 py-2 rounded focus:ring focus:ring-indigo-300">
        <option value="">-- Select Club --</option>
        <% clubs.forEach(club => { %>
          <option value="<%= club._id %>"><%= club.name %></option>
        <% }) %>
      </select>
    </div>

    <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700">Signup</button>
  </form>
</div>

<script>
  const roleSelect = document.getElementById('roleSelect');
  const clubDiv = document.getElementById('clubDiv');

  roleSelect.addEventListener('change', () => {
    if(roleSelect.value === 'admin') {
      clubDiv.classList.remove('hidden');
    } else {
      clubDiv.classList.add('hidden');
    }
  });
</script>

